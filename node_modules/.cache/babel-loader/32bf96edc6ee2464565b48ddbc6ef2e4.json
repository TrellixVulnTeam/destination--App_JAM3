{"ast":null,"code":"import { createSlice, configureStore } from \"@reduxjs/toolkit\";\nimport { getTargetDestination } from \"./targetDestination\";\nconst initialDestinaionsState = {\n  destinations: [],\n  wishList: [],\n  searchTerm: \"\",\n  isLoadin: false,\n  error: false\n};\nconst destinationsSlice = createSlice({\n  name: \"destinations\",\n  initialState: initialDestinaionsState,\n  reducers: {\n    addToWishList(state, action) {\n      const targetDestination = getTargetDestination(state.destinations, action.payload);\n      targetDestination.isFavourit = true;\n\n      if (!state.wishList.some(destination => destination.id === action.payload)) {\n        state.wishList.push(targetDestination);\n      }\n    },\n\n    deletFromWishList(state, action) {\n      const targetDestination = getTargetDestination(state.destinations, action.payload);\n      console.log(targetDestination);\n      targetDestination.isFavourit = false; // const newDestinations = [targetDestination, ...state.destinations];\n      // state.destinations = newDestinations;\n\n      state.wishList = state.wishList.filter(destination => destination.id !== action.payload);\n    },\n\n    completeDestination(state, action) {\n      const ID = action.payload;\n      const targetDestination = state.wishList.find(destination => destination.id === ID);\n      targetDestination.isCompleted = true;\n      console.log(`${ID} checked `);\n    },\n\n    setWishList(state, action) {\n      state.wishList = action.payload;\n    },\n\n    setDestinations(state, action) {\n      state.destinations = action.payload;\n    },\n\n    setSearchTerm(state, action) {\n      state.searchTerm = action.payload;\n    },\n\n    setIsLoading(state, action) {\n      state.isLoading = action.payload;\n    },\n\n    setError(state, action) {\n      state.error = action.payload;\n    }\n\n  }\n});\nconst store = configureStore({\n  reducer: destinationsSlice.reducer\n});\nexport const sendDestinations = (destinations, urlKey) => {\n  return async dispatch => {\n    const sendRequest = async () => {\n      const response = await fetch(` https://destination-app-d14f1-default-rtdb.firebaseio.com/${urlKey}.json`, {\n        method: \"PUT\",\n        //   mode: \"no-cors\",\n        body: JSON.stringify(destinations)\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Sending data failed\");\n      }\n    };\n\n    try {\n      await sendRequest();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const fetchWishDestinations = () => {\n  return async dispatch => {\n    const destinationsResponse = await fetch(\" https://destination-app-d14f1-default-rtdb.firebaseio.com/wishlist.json\");\n    dispatch(Actions.setIsLoading(true));\n\n    if (!destinationsResponse.ok) {\n      throw new Error(\"error fetching data\");\n    }\n\n    try {\n      let wishList = [];\n      const destinationsData = await destinationsResponse.json();\n\n      for (const key in destinationsData) {\n        wishList.push(destinationsData[key]);\n      }\n\n      dispatch(Actions.setWishList(wishList));\n    } catch (e) {\n      dispatch(Actions.setIsLoading(false));\n      dispatch(Actions.setError(true));\n    }\n\n    dispatch(Actions.setIsLoading(false));\n  };\n};\nexport const fetchAllDestinations = () => {\n  return async dispatch => {\n    dispatch(Actions.setIsLoading(true));\n    dispatch(Actions.setError(false));\n    const destinationsResponse = await fetch(\" https://destination-app-d14f1-default-rtdb.firebaseio.com/destinations.json\");\n\n    if (!destinationsResponse.ok) {\n      throw new Error(\"error fetching data\");\n    }\n\n    try {\n      const destinationsData = await destinationsResponse.json();\n      dispatch(Actions.setDestinations(destinationsData));\n    } catch (error) {\n      dispatch(Actions.setIsLoading(false));\n      dispatch(Actions.setError(true));\n    }\n\n    dispatch(Actions.setIsLoading(false));\n  };\n};\nexport const Actions = destinationsSlice.actions;\nexport default store;","map":{"version":3,"names":["createSlice","configureStore","getTargetDestination","initialDestinaionsState","destinations","wishList","searchTerm","isLoadin","error","destinationsSlice","name","initialState","reducers","addToWishList","state","action","targetDestination","payload","isFavourit","some","destination","id","push","deletFromWishList","console","log","filter","completeDestination","ID","find","isCompleted","setWishList","setDestinations","setSearchTerm","setIsLoading","isLoading","setError","store","reducer","sendDestinations","urlKey","dispatch","sendRequest","response","fetch","method","body","JSON","stringify","ok","Error","fetchWishDestinations","destinationsResponse","Actions","destinationsData","json","key","e","fetchAllDestinations","actions"],"sources":["C:/Users/mahdi/OneDrive/Desktop/programming courses/Foothil_Task/destinationApp/src/store/index.js"],"sourcesContent":["import { createSlice, configureStore } from \"@reduxjs/toolkit\";\r\nimport { getTargetDestination } from \"./targetDestination\";\r\n\r\nconst initialDestinaionsState = {\r\n  destinations: [],\r\n  wishList: [],\r\n  searchTerm: \"\",\r\n  isLoadin: false,\r\n  error: false,\r\n};\r\n\r\nconst destinationsSlice = createSlice({\r\n  name: \"destinations\",\r\n  initialState: initialDestinaionsState,\r\n  reducers: {\r\n    addToWishList(state, action) {\r\n      const targetDestination = getTargetDestination(\r\n        state.destinations,\r\n        action.payload\r\n      );\r\n      targetDestination.isFavourit = true;\r\n      if (\r\n        !state.wishList.some((destination) => destination.id === action.payload)\r\n      ) {\r\n        state.wishList.push(targetDestination);\r\n      }\r\n    },\r\n    deletFromWishList(state, action) {\r\n      const targetDestination = getTargetDestination(\r\n        state.destinations,\r\n        action.payload\r\n      );\r\n      console.log(targetDestination);\r\n\r\n      targetDestination.isFavourit = false;\r\n      // const newDestinations = [targetDestination, ...state.destinations];\r\n      // state.destinations = newDestinations;\r\n      state.wishList = state.wishList.filter(\r\n        (destination) => destination.id !== action.payload\r\n      );\r\n    },\r\n    completeDestination(state, action) {\r\n      const ID = action.payload;\r\n      const targetDestination = state.wishList.find(\r\n        (destination) => destination.id === ID\r\n      );\r\n      targetDestination.isCompleted = true;\r\n      console.log(`${ID} checked `);\r\n    },\r\n    setWishList(state, action) {\r\n      state.wishList = action.payload;\r\n    },\r\n    setDestinations(state, action) {\r\n      state.destinations = action.payload;\r\n    },\r\n    setSearchTerm(state, action) {\r\n      state.searchTerm = action.payload;\r\n    },\r\n    setIsLoading(state, action) {\r\n      state.isLoading = action.payload;\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload;\r\n    },\r\n  },\r\n});\r\nconst store = configureStore({\r\n  reducer: destinationsSlice.reducer,\r\n});\r\n\r\nexport const sendDestinations = (destinations, urlKey) => {\r\n  return async (dispatch) => {\r\n    const sendRequest = async () => {\r\n      const response = await fetch(\r\n        ` https://destination-app-d14f1-default-rtdb.firebaseio.com/${urlKey}.json`,\r\n        {\r\n          method: \"PUT\",\r\n          //   mode: \"no-cors\",\r\n          body: JSON.stringify(destinations),\r\n        }\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Sending data failed\");\r\n      }\r\n    };\r\n    try {\r\n      await sendRequest();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchWishDestinations = () => {\r\n  return async (dispatch) => {\r\n    const destinationsResponse = await fetch(\r\n      \" https://destination-app-d14f1-default-rtdb.firebaseio.com/wishlist.json\"\r\n    );\r\n    dispatch(Actions.setIsLoading(true));\r\n\r\n    if (!destinationsResponse.ok) {\r\n      throw new Error(\"error fetching data\");\r\n    }\r\n\r\n    try {\r\n      let wishList = [];\r\n      const destinationsData = await destinationsResponse.json();\r\n      for (const key in destinationsData) {\r\n        wishList.push(destinationsData[key]);\r\n      }\r\n      dispatch(Actions.setWishList(wishList));\r\n    } catch (e) {\r\n      dispatch(Actions.setIsLoading(false));\r\n      dispatch(Actions.setError(true));\r\n    }\r\n    dispatch(Actions.setIsLoading(false));\r\n  };\r\n};\r\nexport const fetchAllDestinations = () => {\r\n  return async (dispatch) => {\r\n    dispatch(Actions.setIsLoading(true));\r\n    dispatch(Actions.setError(false));\r\n    const destinationsResponse = await fetch(\r\n      \" https://destination-app-d14f1-default-rtdb.firebaseio.com/destinations.json\"\r\n    );\r\n    if (!destinationsResponse.ok) {\r\n      throw new Error(\"error fetching data\");\r\n    }\r\n\r\n    try {\r\n      const destinationsData = await destinationsResponse.json();\r\n      dispatch(Actions.setDestinations(destinationsData));\r\n    } catch (error) {\r\n      dispatch(Actions.setIsLoading(false));\r\n      dispatch(Actions.setError(true));\r\n    }\r\n    dispatch(Actions.setIsLoading(false));\r\n  };\r\n};\r\n\r\nexport const Actions = destinationsSlice.actions;\r\nexport default store;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}